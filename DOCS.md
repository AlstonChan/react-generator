# Developer Notes

## Getting Started

1. To start development, first clone the repository:

    ```git
    git clone https://github.com/AlstonChan/react-generator.git
    ```

2. Commands

    1. **`pnpm dev`** : Run this command for developing and debugging
    2. **`pnpm exec:dev`** : Execute the development version of bundle by `pnpm dev` for testing. Not able to test if applications can work with npx.
    3. **`pnpm prebuild`** : Remove the dist folder and all its content
    4. **`pnpm build`** : Build the bundle for production
    5. **`pnpm shebang`** : Add shebang to the file so npx can execute smoothly
    6. **`pnpm release`** : Run both `pnpm build` and `pnpm shebang`, used by deployment server or local testing with `npm pack`.
    7. **`pnpm lint`** : lint the source file of the project, but will ignore all file within the `template` directory.
    8. **`pnpm lint:fix`** : Does the same thing as `pnpm lint`, but will fix any lint error whenever possible.

## Documentation

### Package execution with `npx` return error in Windows

This is primarily due to the missing of **shebang line**, read [this post](https://stackoverflow.com/questions/33509816/what-exactly-does-usr-bin-env-node-do-at-the-beginning-of-node-files) for more information.

To solve this, include `#!/usr/bin/env node` in the top of the entry file and the problem will be fixed. Also, `bin` property have to be added to `package.json`. Check out this [stackoverflow post](https://stackoverflow.com/questions/25333570/npm-package-json-bin-wont-work-on-windows) for more info.

### The generated cmd has syntax error and returns error when executed

When executing the package with `npx`, it will return the following error:

```text
The input line is too long.
The syntax of the command is incorrect.
```

When inspecting the `cmd` file located in the bin directory generated by npm, the last line of the file will contain a incredible long line of word, which explains the error occurrences. This would happen simply because the package *(@vercel/ncc)* that is responsible to bundle this generator mixed the **shebang line** with the compiled code.

To fix this error, simply add a **newline character ('\n')** after the **shebang line**, this split the shebang line from the generated code.
In our case, `helper/shebang-add-newline/shebang.ts` is created to automatically add a newline after the code is compiled, so I don't have to do it manually.

Reference: This [GitHub Issues](https://github.com/vercel/ncc/issues/845)
